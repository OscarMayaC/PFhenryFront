import t from"ndarray";const e=(t,e)=>{if(t<=-e||t>=e)return 0;const n=t*Math.PI;return Math.sin(n)/n*Math.sin(n/e)/(n/e)},n=t=>Math.round(16383*t),r=(t,r,o,a,s)=>{const l=s?2:3,h=1/o,c=Math.min(1,o),f=l/c,i=Math.floor(2*(f+1)),A=new Int16Array((i+2)*r);let M=0;for(let o=0;o<r;o++){const s=(o+.5)*h+a,i=Math.max(0,Math.floor(s-f)),u=Math.min(t-1,Math.ceil(s+f)),p=u-i+1,C=new Float32Array(p),L=new Int16Array(p);let N=0,O=0;for(let t=i;t<=u;t++){const n=e((t+.5-s)*c,l);N+=n,C[O]=n,O++}let S=0;for(let t=0;t<C.length;t++){const e=C[t]/N;S+=e,L[t]=n(e)}L[r>>1]+=n(1-S);let Z=0;for(;Z<L.length&&0===L[Z];)Z++;let _=L.length-1;for(;_>0&&0===L[_];)_--;const g=_-Z+1;A[M++]=i+Z,A[M++]=g,A.set(L.subarray(Z,_+1),M),M+=g}return A},o=t=>t<0?0:t>255?255:t,a=(t,e,n)=>{const[r,a]=t.shape,[s]=e.shape;for(let r=0;r<a;r++){const a=r;let l=0;for(let h=0;h<s;h++){let s=n[l++],c=0,f=0,i=0,A=0;for(let e=n[l++];e>0;e--){const e=n[l++];c+=e*t.get(s,r,0),f+=e*t.get(s,r,1),i+=e*t.get(s,r,2),A+=e*t.get(s,r,3),s++}e.set(h,a,0,o(c+8192>>14)),e.set(h,a,1,o(f+8192>>14)),e.set(h,a,2,o(i+8192>>14)),e.set(h,a,3,o(A+8192>>14))}}};var s;function l(e,n,o){const[l,h]=e.shape,[c,f]=n.shape,i=f/h,A=r(l,c,c/l,0,o===s.LANCZOS_2),M=r(h,f,i,0,o===s.LANCZOS_2),u=t(new Uint8Array(c*h*4),[h,c,4]),p=u.transpose(1,0),C=n.transpose(1,0);a(e,p,A),a(u,C,M)}function h(t,e){l(t,e,s.LANCZOS_3)}function c(t,e){l(t,e,s.LANCZOS_2)}!function(t){t[t.LANCZOS_3=3]="LANCZOS_3",t[t.LANCZOS_2=2]="LANCZOS_2"}(s||(s={}));export{c as lanczos2,h as lanczos3};
//# sourceMappingURL=ndarray-lanczos.modern.js.map
